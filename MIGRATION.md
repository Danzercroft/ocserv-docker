# Миграция на статическую конфигурацию

## Что изменилось

В этой версии проект был переработан для использования статической конфигурации OCServ с встроенными разумными значениями по умолчанию.

## Breaking Changes

1. **Удален файл шаблона**: `config/ocserv.conf.template` заменен на `config/ocserv.conf`
2. **Сокращены переменные окружения**: С 25+ переменных до 8 основных
3. **Изменен механизм конфигурации**: Больше нет подстановки переменных в шаблон

## Миграция

### Если вы использовали стандартные настройки

Просто обновите проект - большинство настроек уже встроено в новый статический конфигурационный файл.

### Если вы кастомизировали переменные окружения

Теперь `.env` опционален. Допускаются только переменные метрик (при необходимости):

```bash
ENABLE_METRICS=true
METRICS_PORT=8000
METRICS_INTERVAL=30
```

### Если вам нужны кастомные настройки

Если вам нужны настройки, которые больше не поддерживаются через переменные окружения:

1. Отредактируйте файл `config/ocserv.conf` напрямую
2. Перезапустите контейнер: `docker-compose restart`

## Встроенные значения

Новые встроенные значения в `config/ocserv.conf`:

- **max-clients**: 128
- **max-same-clients**: 10
- **keepalive**: 30
- **dpd**: 60
- **mobile-dpd**: 300
- **auth-timeout**: 240
- **cookie-timeout**: 300
- **ban-score**: 80
- **ban-reset-time**: 300
- **min-reauth-time**: 300
- **dns**: 8.8.8.8, 1.1.1.1
- **tunnel-all-dns**: true
- **compression**: true
- **cisco-client-compat**: true
- **log-level**: 1

## Преимущества новой архитектуры

- **Простота**: Минимум переменных окружения
- **Надежность**: Проверенные значения по умолчанию
- **Гибкость**: Редактирование конфигурации напрямую
- **Безопасность**: Configs и secrets через Docker Compose / Swarm
